{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport Button from '@material-ui/core/Button';\nimport { Container, Row, Column } from './styles';\nimport { maskMoney } from '../../components/MaksMoney';\nimport List from './components/List';\nimport Cards from './components/Cards';\n\nconst FormCalc = () => {\n  const {\n    0: lista,\n    1: setLista\n  } = useState([]);\n  const {\n    0: aporteMensal,\n    1: setAporteMensal\n  } = useState('0,00');\n  const {\n    handleSubmit,\n    register,\n    setValue,\n    errors,\n    getValues\n  } = useForm();\n\n  const onSubmit = data => {\n    const redimentoMensal = (1 + data.rendimentoAnual / 100) ** (1 / 12) - 1;\n    const listaTemp = [];\n\n    for (let i = 0; i < 360; i++) {\n      if (i === 0) {\n        listaTemp.push({\n          mes: i + 1,\n          rendimento: 0,\n          valorInicial: 0,\n          aporteFinal: parseFloat(aporteMensal.toString().replace('.', '').replace(',', '.'))\n        });\n      } else {\n        const aporteMe = parseFloat(aporteMensal.toString().replace('.', '').replace(',', '.'));\n        const rendimentoAtual = listaTemp[i - 1].aporteFinal * redimentoMensal;\n        listaTemp.push({\n          mes: i + 1,\n          valorInicial: listaTemp[i - 1].aporteFinal,\n          rendimento: rendimentoAtual,\n          aporteFinal: aporteMe + listaTemp[i - 1].aporteFinal + rendimentoAtual\n        });\n      }\n    }\n\n    console.log(listaTemp);\n    setLista(listaTemp);\n  };\n\n  function calcAporteMensal() {\n    const salarioMensal = parseFloat(getValues('salarioMensal').toString().replace('.', '').replace(',', '.'));\n    const percentualAporte = parseInt(getValues('percentualAporte').toString()) / 100;\n    const aporteMensal = percentualAporte * salarioMensal;\n\n    if (aporteMensal) {\n      setAporteMensal(maskMoney((aporteMensal * 100).toString()));\n      const rendaRestante = (salarioMensal - aporteMensal) * 100;\n      setValue('rendaRestante', maskMoney(rendaRestante.toString()));\n    } else {\n      setAporteMensal(maskMoney('000'));\n      setValue('rendaRestante', maskMoney('000'));\n    }\n  }\n\n  function onChangeRemunaration(e) {\n    setValue('salarioMensal', maskMoney(e.target.value));\n    calcAporteMensal();\n  }\n\n  function onChangeLimpar() {\n    setValue('salarioMensal', undefined);\n    setValue('percentualAporte', undefined);\n    setValue('rendaRestante', undefined);\n    setValue('rendimentoAnual', undefined);\n    setAporteMensal('0,00');\n    setLista([]);\n  }\n\n  return __jsx(\"form\", {\n    onSubmit: handleSubmit(onSubmit)\n  }, __jsx(Container, null, __jsx(Row, null, __jsx(Column, null, __jsx(\"label\", null, \"Sal\\xE1rio Mensal\"), __jsx(\"input\", {\n    placeholder: \"R$ 0,00\",\n    className: errors.salarioMensal && 'inpt-error',\n    type: \"text\",\n    name: \"salarioMensal\",\n    onChange: onChangeRemunaration,\n    ref: register({\n      required: true\n    })\n  })), __jsx(Column, null, __jsx(\"label\", null, \"Percentual de Aporte\"), __jsx(\"input\", {\n    placeholder: \"100%\",\n    maxLength: 3,\n    className: errors.percentualAporte && 'inpt-error',\n    type: \"text\",\n    name: \"percentualAporte\",\n    onChange: calcAporteMensal,\n    ref: register({\n      required: true,\n      maxLength: 3\n    })\n  }))), __jsx(Row, null, __jsx(Column, null, __jsx(\"label\", null, \"Aporte Mensal\"), __jsx(\"h2\", {\n    style: {\n      color: '#000'\n    }\n  }, \"R$ \", aporteMensal)), __jsx(Column, null, __jsx(\"label\", null, \"Rendimento Anual\"), __jsx(\"input\", {\n    placeholder: \"100%\",\n    maxLength: 3,\n    className: errors.rendimentoAnual && 'inpt-error',\n    type: \"text\",\n    name: \"rendimentoAnual\",\n    ref: register({\n      required: true,\n      maxLength: 3\n    })\n  }))), __jsx(Row, {\n    style: {\n      justifyContent: 'flex-end'\n    }\n  }, __jsx(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    type: \"submit\",\n    style: {\n      marginRight: '8px'\n    }\n  }, \"Calcular\"), __jsx(Button, {\n    type: \"button\",\n    variant: \"contained\",\n    onClick: onChangeLimpar\n  }, \"Limpar\"))), lista.length > 0 && __jsx(React.Fragment, null, __jsx(Cards, {\n    lista: lista\n  }), __jsx(List, {\n    lista: lista\n  })));\n};\n\nexport default FormCalc;","map":null,"metadata":{},"sourceType":"module"}