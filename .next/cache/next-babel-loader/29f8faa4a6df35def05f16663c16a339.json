{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$(),\n    _jsxFileName = \"/Users/esdraspinheiro/Documents/Projetos/next-independencia-financeira/lib/auth.tsx\",\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { createContext, useContext, useState, useEffect } from 'react';\nimport firebase from './firebase';\nimport { createUser } from './db';\nimport { toast } from 'react-toastify';\nvar authContext = createContext({\n  auth: null,\n  loading: true,\n  signInWithGoogle: function () {\n    var _signInWithGoogle = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    function signInWithGoogle() {\n      return _signInWithGoogle.apply(this, arguments);\n    }\n\n    return signInWithGoogle;\n  }(),\n  signInWithFacebook: function () {\n    var _signInWithFacebook = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    function signInWithFacebook() {\n      return _signInWithFacebook.apply(this, arguments);\n    }\n\n    return signInWithFacebook;\n  }(),\n  signInWithEmailPassword: function () {\n    var _signInWithEmailPassword = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(email, password) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    function signInWithEmailPassword(_x, _x2) {\n      return _signInWithEmailPassword.apply(this, arguments);\n    }\n\n    return signInWithEmailPassword;\n  }(),\n  createWithEmailAndPassword: function () {\n    var _createWithEmailAndPassword = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(email, password) {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    function createWithEmailAndPassword(_x3, _x4) {\n      return _createWithEmailAndPassword.apply(this, arguments);\n    }\n\n    return createWithEmailAndPassword;\n  }(),\n  signOut: function () {\n    var _signOut = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    function signOut() {\n      return _signOut.apply(this, arguments);\n    }\n\n    return signOut;\n  }()\n});\n\nvar formatAuthState = function formatAuthState(user) {\n  return {\n    uid: user.uid,\n    email: user.email,\n    name: user.displayName,\n    photoUrl: user.photoURL,\n    token: null\n  };\n};\n\nfunction useProvideAuth() {\n  _s();\n\n  var _useState = useState(null),\n      auth = _useState[0],\n      setAuth = _useState[1];\n\n  var _useState2 = useState(false),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n  /**\n   * Callback function used for firebase.auth.onAuthStateChanged().\n   * Takes the user object returned and formats it for my state.\n   * We fetch the idToken and append it to my auth state and store it.\n   */\n\n\n  var handleAuthChange = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(authState) {\n      var formattedAuth;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              if (authState) {\n                _context6.next = 2;\n                break;\n              }\n\n              return _context6.abrupt(\"return\");\n\n            case 2:\n              // Formats response into my required state.\n              formattedAuth = formatAuthState(authState); // Fetch firebase auth ID Token.\n\n              _context6.next = 5;\n              return authState.getIdToken();\n\n            case 5:\n              formattedAuth.token = _context6.sent;\n              // Stores auth into state.\n              setAuth(formattedAuth); // Sets loading state to false.\n\n              setLoading(false);\n\n            case 8:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function handleAuthChange(_x5) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  /**\n   * Callback function used for response from firebase OAuth.\n   * Store user object returned in firestore.\n   * @param firebase User Credential\n   */\n\n\n  var signedIn = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(response) {\n      var authedUser;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              setLoading(false);\n\n              if (response.user) {\n                _context7.next = 3;\n                break;\n              }\n\n              throw new Error('No User');\n\n            case 3:\n              // Format user into my required state.\n              authedUser = formatAuthState(response.user); // firestore database function\n\n              createUser(authedUser.uid, authedUser);\n\n            case 5:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    return function signedIn(_x6) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var signedError = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(response) {\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              setLoading(false);\n\n              if (response.code === 'auth/user-not-found') {\n                toast.error('Não há nenhum registro de usuário correspondente a este identificador. O usuário pode ter sido excluído.');\n              }\n\n            case 2:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n\n    return function signedError(_x7) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  /**\n   * Callback for when firebase signOut.\n   * Sets auth state to null and loading to true.\n   */\n\n\n  var clear = function clear() {\n    setAuth(null);\n    setLoading(false);\n  };\n  /**\n   * Triggers firebase Oauth for Google and calls signIn when successful.\n   * sets loading to true.\n   */\n\n\n  var signInWithGoogle = function signInWithGoogle() {\n    setLoading(true);\n    return firebase.auth().signInWithPopup(new firebase.auth.GoogleAuthProvider()).then(signedIn);\n  };\n  /**\n   * Triggers firebase Oauth for E-mail and Password and calls signIn when successful.\n   * sets loading to true.\n   */\n\n\n  var signInWithEmailPassword = function signInWithEmailPassword(email, password) {\n    setLoading(true);\n    return firebase.auth().signInWithEmailAndPassword(email, password).then(signedIn)[\"catch\"](signedError);\n  };\n  /**\n   * Triggers firebase Oauth for facebook and calls signIn when successful.\n   * sets loading to true.\n   */\n\n\n  var signInWithFacebook = function signInWithFacebook() {\n    setLoading(true);\n    return firebase.auth().signInWithPopup(new firebase.auth.FacebookAuthProvider()).then(signedIn);\n  };\n  /**\n   * Create user with E-mail and Password.\n   * sets loading to true.\n   */\n\n\n  var createWithEmailAndPassword = function createWithEmailAndPassword(email, password) {\n    setLoading(true);\n    return firebase.auth().createUserWithEmailAndPassword(email, password).then(signedIn);\n  };\n  /**\n   * Calls firebase signOut and with clear callback to reset state.\n   */\n\n\n  var signOut = function signOut() {\n    return firebase.auth().signOut().then(clear);\n  };\n  /**\n   * Watches for state change for firebase auth and calls the handleAuthChange callback\n   * on every change.\n   */\n\n\n  useEffect(function () {\n    var unsubscribe = firebase.auth().onAuthStateChanged(handleAuthChange);\n    return function () {\n      return unsubscribe();\n    };\n  }, []); // returns state values and callbacks for signIn and signOut.\n\n  return {\n    auth: auth,\n    loading: loading,\n    signInWithGoogle: signInWithGoogle,\n    signInWithFacebook: signInWithFacebook,\n    signInWithEmailPassword: signInWithEmailPassword,\n    createWithEmailAndPassword: createWithEmailAndPassword,\n    signOut: signOut\n  };\n}\n\n_s(useProvideAuth, \"P2/3kfNIfkEstRcCnZXa14M8kwY=\");\n\nexport function AuthProvider(_ref4) {\n  _s2();\n\n  var children = _ref4.children;\n  var auth = useProvideAuth();\n  return __jsx(authContext.Provider, {\n    value: auth,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 10\n    }\n  }, children);\n}\n\n_s2(AuthProvider, \"XNU4Jn8u4aVzJknlKOHFJq03xMo=\", false, function () {\n  return [useProvideAuth];\n});\n\n_c = AuthProvider;\nexport var useAuth = function useAuth() {\n  _s3();\n\n  return useContext(authContext);\n};\n\n_s3(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["/Users/esdraspinheiro/Documents/Projetos/next-independencia-financeira/lib/auth.tsx"],"names":["createContext","useContext","useState","useEffect","firebase","createUser","toast","authContext","auth","loading","signInWithGoogle","signInWithFacebook","signInWithEmailPassword","email","password","createWithEmailAndPassword","signOut","formatAuthState","user","uid","name","displayName","photoUrl","photoURL","token","useProvideAuth","setAuth","setLoading","handleAuthChange","authState","formattedAuth","getIdToken","signedIn","response","Error","authedUser","signedError","code","error","clear","signInWithPopup","GoogleAuthProvider","then","signInWithEmailAndPassword","FacebookAuthProvider","createUserWithEmailAndPassword","unsubscribe","onAuthStateChanged","AuthProvider","children","useAuth"],"mappings":"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","sourcesContent":["import { createContext, Context, useContext, useState, useEffect } from 'react'\nimport firebase from './firebase'\nimport { createUser } from './db'\nimport { toast } from 'react-toastify'\n\ninterface Auth {\n  uid: string\n  email: string | null\n  name: string | null\n  photoUrl: string | null\n  token: string | null\n}\n\ninterface AuthContext {\n  auth: Auth | null\n  loading: boolean\n  signInWithGoogle: () => Promise<void>\n  signInWithFacebook: () => Promise<void>\n  signInWithEmailPassword: (email, password) => Promise<void>\n  createWithEmailAndPassword: (email, password) => Promise<void>\n  signOut: () => Promise<void>\n}\n\nconst authContext: Context<AuthContext> = createContext<AuthContext>({\n  auth: null,\n  loading: true,\n  signInWithGoogle: async () => {},\n  signInWithFacebook: async () => {},\n  signInWithEmailPassword: async (email, password) => {},\n  createWithEmailAndPassword: async (email, password) => {},\n  signOut: async () => {}\n})\n\nconst formatAuthState = (user: firebase.User): Auth => ({\n  uid: user.uid,\n  email: user.email,\n  name: user.displayName,\n  photoUrl: user.photoURL,\n  token: null\n})\n\nfunction useProvideAuth() {\n  const [auth, setAuth] = useState<Auth | null>(null)\n  const [loading, setLoading] = useState<boolean>(false)\n\n  /**\n   * Callback function used for firebase.auth.onAuthStateChanged().\n   * Takes the user object returned and formats it for my state.\n   * We fetch the idToken and append it to my auth state and store it.\n   */\n  const handleAuthChange = async (authState: firebase.User | null) => {\n    if (!authState) {\n      return\n    }\n\n    // Formats response into my required state.\n    const formattedAuth = formatAuthState(authState)\n    // Fetch firebase auth ID Token.\n    formattedAuth.token = await authState.getIdToken()\n    // Stores auth into state.\n    setAuth(formattedAuth)\n    // Sets loading state to false.\n    setLoading(false)\n  }\n\n  /**\n   * Callback function used for response from firebase OAuth.\n   * Store user object returned in firestore.\n   * @param firebase User Credential\n   */\n  const signedIn = async (response: firebase.auth.UserCredential) => {\n    setLoading(false)\n    if (!response.user) {\n      throw new Error('No User')\n    }\n\n    // Format user into my required state.\n    const authedUser = formatAuthState(response.user)\n    // firestore database function\n    createUser(authedUser.uid as string, authedUser)\n  }\n\n  const signedError = async (response: firebase.auth.Error) => {\n    setLoading(false)\n    if (response.code === 'auth/user-not-found') {\n      toast.error(\n        'Não há nenhum registro de usuário correspondente a este identificador. O usuário pode ter sido excluído.'\n      )\n    }\n  }\n\n  /**\n   * Callback for when firebase signOut.\n   * Sets auth state to null and loading to true.\n   */\n  const clear = () => {\n    setAuth(null)\n    setLoading(false)\n  }\n\n  /**\n   * Triggers firebase Oauth for Google and calls signIn when successful.\n   * sets loading to true.\n   */\n  const signInWithGoogle = () => {\n    setLoading(true)\n    return firebase\n      .auth()\n      .signInWithPopup(new firebase.auth.GoogleAuthProvider())\n      .then(signedIn)\n  }\n\n  /**\n   * Triggers firebase Oauth for E-mail and Password and calls signIn when successful.\n   * sets loading to true.\n   */\n  const signInWithEmailPassword = (email, password) => {\n    setLoading(true)\n    return firebase\n      .auth()\n      .signInWithEmailAndPassword(email, password)\n      .then(signedIn)\n      .catch(signedError)\n  }\n\n  /**\n   * Triggers firebase Oauth for facebook and calls signIn when successful.\n   * sets loading to true.\n   */\n  const signInWithFacebook = () => {\n    setLoading(true)\n    return firebase\n      .auth()\n      .signInWithPopup(new firebase.auth.FacebookAuthProvider())\n      .then(signedIn)\n  }\n\n  /**\n   * Create user with E-mail and Password.\n   * sets loading to true.\n   */\n  const createWithEmailAndPassword = (email, password) => {\n    setLoading(true)\n    return firebase\n      .auth()\n      .createUserWithEmailAndPassword(email, password)\n      .then(signedIn)\n  }\n\n  /**\n   * Calls firebase signOut and with clear callback to reset state.\n   */\n  const signOut = () => {\n    return firebase.auth().signOut().then(clear)\n  }\n\n  /**\n   * Watches for state change for firebase auth and calls the handleAuthChange callback\n   * on every change.\n   */\n  useEffect(() => {\n    const unsubscribe = firebase.auth().onAuthStateChanged(handleAuthChange)\n    return () => unsubscribe()\n  }, [])\n\n  // returns state values and callbacks for signIn and signOut.\n  return {\n    auth,\n    loading,\n    signInWithGoogle,\n    signInWithFacebook,\n    signInWithEmailPassword,\n    createWithEmailAndPassword,\n    signOut\n  }\n}\n\nexport function AuthProvider({ children }: any) {\n  const auth = useProvideAuth()\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>\n}\n\nexport const useAuth = () => useContext(authContext)\n"]},"metadata":{},"sourceType":"module"}